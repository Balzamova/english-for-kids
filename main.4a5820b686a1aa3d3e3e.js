(()=>{"use strict";var e={195:(e,t,n)=>{n.r(t)},880:(e,t,n)=>{n.r(t)},244:(e,t,n)=>{n.r(t)},238:(e,t,n)=>{n.r(t)},863:(e,t,n)=>{n.r(t)},343:(e,t,n)=>{n.r(t)},474:(e,t,n)=>{n.r(t)},170:(e,t,n)=>{n.r(t)},993:(e,t,n)=>{n.r(t)},417:(e,t,n)=>{n.r(t)},463:(e,t,n)=>{n.r(t)},306:(e,t,n)=>{n.r(t)},653:(e,t,n)=>{n.r(t)},24:(e,t,n)=>{n.r(t)},307:(e,t,n)=>{n.r(t)},203:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(697),s=n(14);t.default=class{getCategories(){return a(this,void 0,void 0,(function*(){const e=yield fetch(i.Endpoints.categories),t=yield e.json(),n=[];for(let e=0;e<t.length;e++){const a={id:t[e].id,name:t[e].name};n.push(a)}return n}))}removeCategory(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(`${i.Endpoints.categories}/${e}`,{method:"DELETE"});yield t.json()}))}updateCategory(e){return a(this,void 0,void 0,(function*(){const t={id:+e.id,name:e.name},n=yield fetch(`${i.Endpoints.categories}/${+e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()}))}createCategory(e){return a(this,void 0,void 0,(function*(){const t={name:e.name},n=yield fetch(`${i.Endpoints.categories}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()}))}getCards(){return a(this,void 0,void 0,(function*(){const e=yield fetch(i.Endpoints.cards),t=yield e.json(),n=[];for(let e=0;e<t.length;e++){const a={id:t[e].id,categoryId:t[e].categoryId,word:t[e].word,translation:t[e].translation,image:t[e].image,audio:t[e].audio};n.push(a)}return n}))}removeCard(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(`${i.Endpoints.cards}/${e}`,{method:"DELETE"});yield t.json()}))}getCardById(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(`${i.Endpoints.cards}/${e}`);return yield t.json()}))}updateCard(e){return a(this,void 0,void 0,(function*(){const t={id:+e.id,categoryId:+e.categoryId,word:e.word,translation:e.translation,image:e.image,audio:e.audio},n=yield fetch(`${i.Endpoints.cards}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()}))}createCard(e){return a(this,void 0,void 0,(function*(){const t={id:+e.id,categoryId:+e.categoryId,word:e.word,translation:e.translation,image:e.image,audio:e.audio},n=yield fetch(`${i.Endpoints.cards}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()}))}loadDataToServer(e){return a(this,void 0,void 0,(function*(){const t=document.getElementById(`sound-input-${e}`),n=new FormData;(null==t?void 0:t.files)&&t.files[0]&&n.append(t.name,t.files[0]);const a=yield fetch(i.Endpoints.uploads,{method:"POST",body:n});return yield a.json()}))}loginHandler(e){return a(this,void 0,void 0,(function*(){let t="";t=s.state.needRegistry?i.Endpoints.authRegistry:i.Endpoints.authLogin;const n=yield fetch(`${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield n.json()}))}}},752:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(307);const s=i(n(583)),d=i(n(0)),o=i(n(977)),r=i(n(743)),l=i(n(584)),c=i(n(748)),u=i(n(723)),h=i(n(203)),m=n(41),p=n(14),g=n(130),f=i(n(790)),v=n(761),y="active";t.default=class{constructor(e){this.rootElement=e,this.baseWrapper=new s.default("div",["wrapper"]),this.loading=new f.default,this.header=new o.default,this.main=new r.default,this.footer=new d.default,this.controls=new l.default,this.container=new c.default(0),this.api=new h.default,this.rootElement.appendChild(this.baseWrapper.element),this.addLoaderElement()}addLoaderElement(){return a(this,void 0,void 0,(function*(){this.baseWrapper.element.append(this.loading.element),yield this.api.getCategories(),setTimeout((()=>{this.addComponents()}),1e3)}))}destroyLoadingSpinner(){const e=document.querySelector(".loading");this.baseWrapper.element.contains(e)&&this.baseWrapper.element.removeChild(e)}addComponents(){p.state.isAppLoaded=!0,this.destroyLoadingSpinner(),this.baseWrapper.element.append(this.header.element),this.baseWrapper.element.append(this.main.element),this.baseWrapper.element.append(this.footer.element),this.header.list.renderMenu(),this.main.createPage(m.pages.main.id),this.main.page.addMainPage(),this.listenMainHeader(),this.listenEndGame(),this.listenAdminPage()}listenMainHeader(){this.baseWrapper.element.addEventListener("click",(e=>{const t=e.target;t.classList.contains("burger")?this.header.burger.toggle():t.classList.contains("header__list")||p.state.isAdminPage||this.header.burger.close(),(t.classList.contains("switcher")||t.classList.contains("switch")||t.classList.contains("switch__title"))&&(p.state.playState=!p.state.playState,this.header.switcher.switch(),this.controls.switchStart(),this.container.cardField.toggleCardsInfo(p.state.playState),p.state.gameActive&&((new u.default).removeStars(),this.container.hideImage(!1),p.state.gameActive=!1)),(t.classList.contains("header__item")||t.classList.contains("main__card")||t.classList.contains("main__card-img")||t.classList.contains("main__card-title"))&&(this.header.list.activateMenuItem(e),this.checkPageToCreate(e),this.container.cardField.toggleCardsInfo(p.state.playState))}))}listenAdminPage(){this.baseWrapper.element.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("logout")&&(p.state.isAdminPage=!1,this.activateAdminHeaderItem(!0),this.header.destroyHeader(),this.checkPageToCreate(e),this.header.list.renderMenu(),this.header.list.activateMenuItem(null)),t.classList.contains("admin__back")&&(this.checkPageToCreate(e),this.activateAdminHeaderItem(!0)),t.classList.contains("cat__add")){const t=+e.target.id.split("-")[1];p.state.currentCategory=t,this.openWordsPage(t)}t.classList.contains("play__btn")&&this.playSound(e)}))}openAuthModal(){this.main.addAuthPage(),this.listenAuthForm()}listenAuthForm(){this.baseWrapper.element.addEventListener("click",(e=>{const t=e.target;t.classList.contains("auth-enter")&&this.checkLoginData(e),t.classList.contains("auth-registry")&&this.checkLoginData(e),t.classList.contains("auth-cancel")&&(p.state.needRegistry=!1,this.main.destroyAuthPage())}))}checkLoginData(e){const t=document.getElementById("auth-login"),n=document.getElementById("auth-password");if(t.value&&n.value){const a={email:t.value,login:t.value,password:n.value};this.checkAction(e,a)}else this.main.showMessage(v.Message.loginEmpty,!0),this.listenAuthForm()}checkAction(e,t){e.target.innerText.toLowerCase()===g.Actions.enter?this.checkUser(e,t):this.createUser(t)}createUser(e){return a(this,void 0,void 0,(function*(){const t=new f.default;this.baseWrapper.element.append(t.element);const n=yield this.api.loginHandler(e);n.message===v.Message.userCreated?this.switchAuthModals(v.Message.userCreated,!1):(this.main.showMessage(n.message,!0),this.listenAuthForm()),setTimeout((()=>{this.destroyLoadingSpinner()}),200)}))}switchAuthModals(e,t){p.state.needRegistry=t,this.main.showMessage(e,t),this.main.destroyAuthPage()}checkUser(e,t){return a(this,void 0,void 0,(function*(){const n=new f.default;this.baseWrapper.element.append(n.element);const a=yield this.api.loginHandler(t);a.userId?(this.openAdminPage(e),this.main.showMessage(v.Message.welcome,!1)):a.message===v.Message.passwordIncorrect?(this.main.showMessage(v.Message.passwordIncorrect,!0),this.listenAuthForm()):(this.switchAuthModals(v.Message.userNotFound,!0),this.openAuthModal()),setTimeout((()=>{this.destroyLoadingSpinner()}),200)}))}openAdminPage(e){p.state.isAdminPage=!0,this.main.destroyAuthPage(),this.header.destroyHeader(),this.checkPageToCreate(e)}checkPageToCreate(e){const t=e.target,n=t.innerText.toLowerCase();let a="";a=n?n===g.Actions.logout?m.pages.main.name:n===g.Actions.back||n===g.Actions.enter?m.pages.adminCategory.name:t.innerText:t.dataset.category,n===g.Actions.login?this.openAuthModal():(this.main.destroyPage(),this.createNewPage(a))}createNewPage(e){return a(this,void 0,void 0,(function*(){if(e===m.pages.main.name)this.main.createPage(m.pages.main.id),this.main.page.addMainPage();else if(e===m.pages.adminCategory.name)this.main.createPage(m.pages.adminCategory.id),this.main.page.addAdminCategoryPage();else{const t=yield this.checkCategoryId(e);t&&(p.state.currentCategory=t,this.main.createPage(m.pages.category.id),this.main.page.addCategoryPage(t))}}))}checkCategoryId(e){return a(this,void 0,void 0,(function*(){const t=yield this.api.getCategories();let n=0;for(let a=0;a<t.length;a++)if(e===t[a].name)return n=t[a].id,n;return n}))}listenEndGame(){document.addEventListener("finish",this.showMainPage,!1)}showMainPage(){const e=new r.default;e.destroyPage(),e.createPage(m.pages.main.id),e.page.addMainPage(),document.querySelectorAll(".header__item").forEach((e=>{e.classList.remove(y)}));const t=document.querySelector(".header__item");null==t||t.classList.add(y)}activateAdminHeaderItem(e){const t=document.querySelector(".header-categories"),n=document.querySelector(".header-cards");e?(t.classList.add(y),n.classList.remove(y)):(t.classList.remove(y),n.classList.add(y))}openWordsPage(e){this.main.destroyPage(),this.main.createPage(m.pages.adminCard.id),this.main.page.addAdminCardsPage(e),this.activateAdminHeaderItem(!1)}getAudioUrl(e){return a(this,void 0,void 0,(function*(){return(yield this.api.getCardById(e)).audio}))}playSound(e){return a(this,void 0,void 0,(function*(){const t=+e.target.id.split("-")[1],n=yield this.getAudioUrl(t);n||this.container.playEffect(!1),this.container.playAudio(n)}))}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},130:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,(n=t.Actions||(t.Actions={})).remove="remove",n.add="add",n.update="update",n.logout="logout",n.login="login",n.enter="enter",n.back="back to categories",n.registry="registry"},655:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Effects=void 0,(n=t.Effects||(t.Effects={})).correct="./audio/correct.mp3",n.error="./audio/error.mp3",n.success="./audio/success.mp3",n.failure="./audio/failure.mp3"},697:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Endpoints=void 0,(n=t.Endpoints||(t.Endpoints={})).baseUrl="https://young-journey-40368.herokuapp.com",n.categories="https://young-journey-40368.herokuapp.com/api/categories",n.cards="https://young-journey-40368.herokuapp.com/api/cards",n.uploads="https://young-journey-40368.herokuapp.com/api/uploads",n.audioServerUrl="https://young-journey-40368.herokuapp.com/api/static",n.authLogin="https://young-journey-40368.herokuapp.com/api/auth/login",n.authRegistry="https://young-journey-40368.herokuapp.com/api/auth/register"},39:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Modes=void 0,(n=t.Modes||(t.Modes={})).train="Train",n.play="Play"},41:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pages=void 0,t.pages={main:{name:"Main page",id:"mainPage"},category:{name:"Categories",id:"categoryPage"},endGame:{name:"endGame",id:"endGamePage"},adminCategory:{name:"adminCategory",id:"adminCategory"},adminCard:{name:"adminCard",id:"adminCard"}}},14:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.state=void 0,t.state={isAppLoaded:!1,isAdminPage:!1,needRegistry:!1,currentCategory:0,playState:!1,gameActive:!1,endGame:!1,randomArray:[0],cards:[{id:0,categoryId:0,word:"",translation:"",image:"",audio:""}],index:0,errors:0,src:""}},761:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0,(n=t.Message||(t.Message={})).wordExists="Card with same word exists",n.categoryExists="Category with same name exists",n.wordAmpty="Word and/or translation is ampty",n.nothingUpdate="Nothing to update",n.addName="Add category name",n.passwordIncorrect="Password incorrect, try again",n.userNotFound="User not found. The registry form will open now.",n.loginEmpty="Login or password is empty.",n.userCreated="New user created",n.welcome="Welcome to admin page! You can configure categories and cards here"},0:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(195);const i=a(n(583));class s extends i.default{constructor(){super("footer",["footer"]),this.element.insertAdjacentHTML("afterbegin","\n      <ul class='footer__list'>\n        <li class='footer__item'>\n          <a class='footer__link' href='https://docs.rs.school/' target='blank'>\n            © Rolling Scopes School\n          </a>\n        </li>\n        <li class='footer__item'>\n          <a class='footer__link' href='https://github.com/Balzamova' target='blank'>\n            © Anastasiia Balzamova\n          </a>\n        </li>\n      </ul>\n    ")}}t.default=s},404:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(583));n(880);class s extends i.default{constructor(){super("div",["burger"]),this.span=new i.default("span",["burger__span"]),this.element.append(this.span.element)}toggle(){const e=document.querySelector(".header__list");this.element.classList.toggle("active"),e.classList.toggle("active")}close(){const e=document.querySelector(".header__list");this.element.classList.remove("active"),e.classList.remove("active")}}t.default=s},939:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(244);const i=a(n(583));class s extends i.default{constructor(){super("div",["header__container"]),this.menu=new i.default("div",["header__menu-admin"]),this.categories=new i.default("span",["header__admin_span","header-categories","active"]),this.words=new i.default("span",["header__admin_span","header-cards"]),this.logout=new i.default("button",["header__admin_btn","logout"]),this.renderMenu()}renderMenu(){this.logout.element.innerText="logout",this.categories.element.innerText="categories",this.words.element.innerText="words",this.menu.element.append(this.categories.element),this.menu.element.append(this.words.element),this.element.append(this.menu.element),this.element.append(this.logout.element)}}t.default=s},766:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(238);const i=a(n(583));class s extends i.default{constructor(){super("li",["header__item"])}}t.default=s},274:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(238);const s=i(n(583)),d=i(n(766)),o=i(n(203)),r="active";class l extends s.default{constructor(){super("ul",["header__list"]),this.api=new o.default,this.loginBtn=new s.default("li",["header__item","header_login"])}clearMenu(){const e=document.querySelectorAll(".header__item");e&&e.forEach((e=>{var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}))}renderMenu(){return a(this,void 0,void 0,(function*(){this.clearMenu();const e=yield this.api.getCategories(),t=new d.default;t.element.innerText="Main page";const n=[t],a=e.length;for(let t=0;t<a;t++){const a=new d.default;a.element.innerText=e[t].name,n.push(a)}n.forEach((e=>{this.element.append(e.element)})),this.loginBtn.element.innerText="Login",this.element.append(this.loginBtn.element),this.activateMenuItem(null)}))}activateMenuItem(e){return a(this,void 0,void 0,(function*(){if(document.querySelectorAll(".header__item").forEach((e=>{e.classList.remove(r)})),e)(yield this.getItem(e)).classList.add(r);else{const e=document.querySelector(".header__item");null==e||e.classList.add(r)}}))}getIndex(e){return a(this,void 0,void 0,(function*(){const t=yield this.api.getCategories();let n=0;for(let a=0;a<t.length;a++)t[a].name===e&&(n=a);return n}))}getItem(e){return a(this,void 0,void 0,(function*(){const t=e.target;let n;if(t.classList.contains("header__item"))n=t;else{const e=t.dataset.category,a=yield this.getIndex(e);n=document.querySelectorAll(".header__item")[a+1]}return n}))}toggleList(){this.element.classList.toggle(r)}}t.default=l},977:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(583)),s=n(14),d=a(n(748)),o=a(n(584)),r=a(n(404)),l=a(n(939)),c=a(n(274)),u=a(n(709));class h extends i.default{constructor(){super("header",["header"]),this.headerContainer=new i.default("div",["header__container"]),this.menu=new i.default("div",["header__menu"]),this.burger=new r.default,this.list=new c.default,this.switcher=new u.default,this.headerAdmin=new l.default,this.controls=new o.default,this.container=new d.default(0),this.title=new i.default("h1",["header__title"]),this.destroyHeader()}destroyHeader(){var e;const t=document.querySelector(".header__container");null===(e=null==t?void 0:t.parentNode)||void 0===e||e.removeChild(t),s.state.isAdminPage?this.addHeaderAdmin():this.addHeaderMain()}addHeaderMain(){this.title.element.innerText="English for kids",this.element.classList.remove("admin"),this.element.append(this.headerContainer.element),this.headerContainer.element.append(this.menu.element),this.headerContainer.element.append(this.title.element),this.headerContainer.element.append(this.switcher.element),this.menu.element.append(this.burger.element),this.menu.element.append(this.list.element)}addHeaderAdmin(){this.element.classList.add("admin"),this.element.append(this.headerAdmin.element)}}t.default=h},709:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(863);const i=a(n(583)),s=n(39),d=n(14);class o extends i.default{constructor(){super("div",["switcher"]),this.switcher=new i.default("div",["switch"]),this.title=new i.default("div",["switch__title"]),this.title.element.innerText=s.Modes.train,this.element.append(this.switcher.element),this.element.append(this.title.element)}switch(){d.state.playState?this.title.element.innerText=s.Modes.play:this.title.element.innerText=s.Modes.train,this.switcher.element.classList.toggle("active"),this.title.element.classList.toggle("active");const e=document.querySelector("body");null==e||e.classList.toggle("play")}}t.default=o},847:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(343);const i=a(n(583)),s=a(n(203));class d extends i.default{constructor(e){super("div",["admin__card"]),this.remove=new i.default("div",["card__remove"]),this.front=new i.default("div",["card__front"]),this.back=new i.default("div",["card__back","none"]),this.word=new i.default("h2",["admin__card_name","title"]),this.translation=new i.default("h2",["admin__card_name","title"]),this.sound=new i.default("h2",["admin__card_name","title"]),this.image=new i.default("div",["admin__card_name","title"]),this.update=new i.default("button",["card__update"]),this.wordLabel=new i.default("label",["admin__card_label"]),this.wordInput=document.createElement("input"),this.translationLabel=new i.default("label",["admin__card_label"]),this.translationInput=document.createElement("input"),this.soundLabel=new i.default("div",["admin__card_label","load"]),this.soundBtn=new i.default("label",["admin__card_load"]),this.soundInput=document.createElement("input"),this.imageLabel=new i.default("div",["admin__card_label","load"]),this.imageBtn=new i.default("label",["admin__card_load"]),this.imageInput=document.createElement("input"),this.buttons=new i.default("div",["buttons"]),this.cancel=new i.default("button",["card__cancel"]),this.create=new i.default("button",["card__create"]),this.preview=new i.default("div",["preview"]),this.api=new s.default,this.initMainElements(e)}initMainElements(e){this.element.id=`card-${e.id}`,this.front.element.id=`word-front-${e.id}`,this.back.element.id=`word-back-${e.id}`,this.remove.element.id=`card-remove-${e.id}`,this.word.element.id=`word-title-${e.id}`,this.word.element.innerHTML=`Word:\n      <span id="word-${e.id}">${e.word}</span>\n    `,this.translation.element.id=`translation-title-${e.id}`,this.translation.element.innerHTML=`Translation:\n      <span id="translation-${e.id}">${e.translation}</span>\n    `,this.sound.element.id=`sound-title-${e.id}`,this.sound.element.innerHTML=`Sound:\n      <div id="sound-${e.id}" class="sound__text">${this.getAudioName(e.audio)}</div>\n      <div id="play-${e.id}" class="play__btn"></div>\n    `,this.image.element.id=`image-title-${e.id}`,this.image.element.innerHTML=`Image:\n        <img\n          id="card-image-${e.id}"\n          class="admin__card_img"\n          src="${e.image}"\n          alt="${e.word}"\n      />\n    `,this.initCreatingElements(e)}initCreatingElements(e){this.wordLabel.element.id=`word-label-${e.id}`,this.wordLabel.element.innerText="Word:",this.wordInput.id=`word-input-${e.id}`,this.wordInput.className="admin__card_input none",this.wordInput.type="text",this.wordInput.value=e.word,this.translationLabel.element.id=`translation-label-${e.id}`,this.translationLabel.element.innerText="Translation:",this.translationInput.id=`translation-input-${e.id}`,this.translationInput.className="admin__card_input none",this.translationInput.type="text",this.translationInput.value=e.translation,this.soundLabel.element.id=`sound-label-${e.id}`,this.soundLabel.element.innerText="Sound:",this.soundBtn.element.id=`load-sound-${e.id}`,this.soundBtn.element.innerText="Select file",this.soundInput.id=`sound-input-${e.id}`,this.soundInput.type="file",this.soundInput.accept=".mp3",this.soundInput.name="sound",this.imageLabel.element.id=`image-label-${e.id}`,this.imageLabel.element.innerText="Image:",this.imageBtn.element.id=`load-image-${e.id}`,this.imageBtn.element.innerText="Select file",this.imageInput.id=`image-input-${e.id}`,this.imageInput.type="file",this.imageInput.accept=".jpg, .jpeg, .png",this.imageInput.name="img",this.preview.element.id=`preview-${e.id}`,this.update.element.id=`card-update-${e.id}`,this.update.element.innerText="Change",this.buttons.element.id=`buttons-${e.id}`,this.cancel.element.id=`card-cancel-${e.id}`,this.cancel.element.innerText="Cancel",this.create.element.id=`card-create-${e.id}`,this.create.element.innerText="Create",this.addElements(e)}addElements(e){this.wordLabel.element.append(this.wordInput),this.translationLabel.element.append(this.translationInput),this.soundLabel.element.insertAdjacentHTML("afterbegin",`\n      <div class="done__svg none" id="sound-done-${e.id}"></div>\n    `),this.imageLabel.element.insertAdjacentHTML("afterbegin",`\n      <div class="done__svg none" id="image-done-${e.id}"></div>\n    `),this.soundLabel.element.append(this.soundBtn.element),this.soundBtn.element.append(this.soundInput),this.imageLabel.element.append(this.imageBtn.element),this.imageBtn.element.append(this.imageInput),this.buttons.element.append(this.cancel.element),this.buttons.element.append(this.create.element),this.front.element.append(this.word.element),this.front.element.append(this.translation.element),this.front.element.append(this.sound.element),this.front.element.append(this.image.element),this.front.element.append(this.update.element),this.back.element.append(this.wordLabel.element),this.back.element.append(this.translationLabel.element),this.back.element.append(this.soundLabel.element),this.back.element.append(this.imageLabel.element),this.back.element.append(this.preview.element),this.back.element.append(this.buttons.element),this.element.append(this.remove.element),this.element.append(this.front.element),this.element.append(this.back.element),e.id||this.openCardCreator()}getAudioName(e){return e.split("/").pop()}openCardCreator(){this.front.element.classList.add("none"),this.back.element.classList.remove("none")}}t.default=d},920:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(474);const s=i(n(583)),d=i(n(203));class o extends s.default{constructor(e,t){super("div",["cat__container"]),this.remove=new s.default("div",["cat__remove"]),this.title=new s.default("h1",["cat__title"]),this.words=new s.default("h2",["cat__words"]),this.buttons=new s.default("div",["cat__buttons"]),this.update=new s.default("button",["cat__update"]),this.add=new s.default("button",["cat__add"]),this.cancel=new s.default("button",["cat__cancel","none"]),this.create=new s.default("button",["cat__create","none"]),this.label=new s.default("label",["update-label","none"]),this.input=new s.default("input",["update-input","none"]),this.api=new d.default,this.addElements(e,t)}addElements(e,t){return a(this,void 0,void 0,(function*(){const n=yield this.checkLength(e);this.element.id=`cat-${e}`,this.remove.element.id=`remove-${e}`,this.title.element.id=`title-${e}`,this.title.element.innerText=t,this.words.element.id=`words-${e}`,this.words.element.innerHTML=`Words: <span class="cat__count">${n}</span>`,this.update.element.id=`update-${e}`,this.update.element.innerText="Update",this.add.element.id=`add-${e}`,this.add.element.innerText="Add word",this.cancel.element.id=`cancel-${e}`,this.cancel.element.innerText="Cancel",this.create.element.id=`create-${e}`,this.create.element.innerText="Create",this.label.element.innerText="Category Name:",this.label.element.id=`update-label-${e}`,this.input.element.id=`update-input-${e}`,this.buttons.element.append(this.update.element),this.buttons.element.append(this.add.element),this.buttons.element.append(this.cancel.element),this.buttons.element.append(this.create.element),this.element.append(this.remove.element),this.element.append(this.title.element),this.element.append(this.words.element),this.element.append(this.label.element),this.element.append(this.input.element),this.element.append(this.buttons.element),e||this.openCategoryCreator()}))}checkLength(e){return a(this,void 0,void 0,(function*(){const t=yield this.api.getCards();let n=0;for(let a=0;a<t.length;a++)t[a].categoryId===e&&n++;return n}))}openCategoryUpdator(e,t){const n=document.getElementById(`title-${e}`),a=document.getElementById(`remove-${e}`),i=document.getElementById(`words-${e}`),s=document.getElementById(`update-${e}`),d=document.getElementById(`add-${e}`),o=document.getElementById(`cancel-${e}`),r=document.getElementById(`create-${e}`),l=document.getElementById(`update-label-${e}`),c=document.getElementById(`update-input-${e}`);n.classList.add("none"),a.classList.add("none"),i.classList.add("none"),s.classList.add("none"),d.classList.add("none"),o.classList.remove("none"),r.classList.remove("none"),l.classList.remove("none"),c.classList.remove("none"),c.value=t}cancelCategoryUpdator(e){const t=document.getElementById(`title-${e}`),n=document.getElementById(`remove-${e}`),a=document.getElementById(`words-${e}`),i=document.getElementById(`update-${e}`),s=document.getElementById(`add-${e}`),d=document.getElementById(`cancel-${e}`),o=document.getElementById(`create-${e}`),r=document.getElementById(`update-label-${e}`),l=document.getElementById(`update-input-${e}`);t.classList.remove("none"),n.classList.remove("none"),a.classList.remove("none"),i.classList.remove("none"),s.classList.remove("none"),d.classList.add("none"),o.classList.add("none"),r.classList.add("none"),l.classList.add("none")}openCategoryCreator(){this.title.element.classList.add("none"),this.remove.element.classList.add("none"),this.words.element.classList.add("none"),this.update.element.classList.add("none"),this.add.element.classList.add("none"),this.cancel.element.classList.remove("none"),this.create.element.classList.remove("none"),this.label.element.classList.remove("none"),this.input.element.classList.remove("none")}}t.default=o},878:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(170);const i=a(n(583)),s=n(14),d=n(130);class o extends i.default{constructor(){super("div",["auth__container"]),this.createAuthWindow()}createAuthWindow(){let e="",t="",n="",a="";s.state.needRegistry?(e=d.Actions.registry,t=d.Actions.registry,n="your new login",a="your new password"):(e=d.Actions.login,t=d.Actions.enter,n="admin",a="admin"),this.element.innerHTML=`\n      <form class="auth__form">\n        <h2 class="auth__header">${e}</h2>\n        <label class="auth__label">Enter login\n          <input \n            type="text"\n            id="auth-login"\n            class="auth__input"\n            placeholder="${n}">\n        </label>\n        <label class="auth__label">Enter password\n          <input \n            type="password"\n            id="auth-password"\n            class="auth__input"\n            placeholder="${a}">\n        </label>\n\n        <div class="auth__footer">\n          <button class="auth__btn auth-cancel">Cancel</button>\n          <button type="submit" class="auth__btn auth-${t}">${t}</button>\n        </div>\n      </form>\n    `,this.element.addEventListener("click",(e=>e.preventDefault()))}}t.default=o},132:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(993);const s=i(n(583)),d=i(n(570)),o=i(n(203)),r=n(14);class l extends s.default{constructor(e){super("div",["card__field"]),this.api=new o.default,this.createCards(e)}createCards(e){return a(this,void 0,void 0,(function*(){const t=yield this.api.getCards(),n=[];for(let a=0;a<t.length;a++)if(e===t[a].categoryId){const e=`${t[a].image}`,i=new d.default(e,t[a].word,t[a].translation);n.push(i)}n.forEach((e=>{this.element.append(e.element)})),this.toggleCardsInfo(r.state.playState)}))}toggleCardsInfo(e){const t=document.querySelectorAll(".card__title-front"),n=document.querySelectorAll(".card__btn");e?(t.forEach((e=>{e.classList.add("none")})),n.forEach((e=>{e.classList.add("none")}))):(t.forEach((e=>{e.classList.remove("none")})),n.forEach((e=>{e.classList.remove("none")})))}}t.default=l},570:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(993);const i=a(n(583));class s extends i.default{constructor(e,t,n){super("div",["card__container",`${t}`]),this.card="",this.element.id=t,this.card=`\n      <div class="card">\n        <div class="back">\n          <img src="${e}" class="card__img-back" alt="${t}"/>\n          <div class="card__title-back">${n}</div>\n        </div>\n        <div class="front">\n          <img src="${e}" class="card__img-front" alt="${t}"/>\n          <div class="card__title-front">${t}</div>\n        </div>\n        <button class="card__btn">\n          <svg data-name="${t}" class="card__btn-svg" xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400" viewBox="0, 0, 400,400">\n            <g>\n              <path id="path0" d="M149.333 106.849 C -33.313 127.384,-41.223 252.474,138.667\n              275.531 C 146.978 276.596,157.155 277.883,161.284 278.391 L 168.790 279.314 169.284\n              303.117 L 169.778 326.920 214.222 292.359 C 238.667 273.351,258.667 256.989,258.667\n              256.000 C 258.667 255.011,238.667 238.649,214.222 219.641 L 169.778 185.080 169.280\n              208.294 L 168.783 231.508 158.614 230.340 C 114.170 225.237,73.024 211.579,59.659 197.495\n              L 54.430 191.983 60.245 185.983 C 103.148 141.719,300.841 141.956,339.792 186.318 L\n              345.150 192.421 340.131 197.714 C 334.182 203.985,316.718 213.058,300.000 218.562 L\n              288.000 222.512 288.000 246.565 L 288.000 270.618 294.624 269.375 C 380.118 253.336,418.057\n              192.558,369.823 148.909 C 332.872 115.470,236.377 97.063,149.333 106.849 "\n              stroke="none">\n              </path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    `,this.element.insertAdjacentHTML("afterbegin",this.card)}}t.default=s},748:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(583)),d=i(n(584)),o=i(n(132)),r=i(n(723)),l=n(655),c=n(14),u=n(41),h=i(n(743)),m=i(n(203));class p extends s.default{constructor(e){super("div",["container"]),this.buttons=new d.default,this.rating=new r.default,this.audio=new Audio,this.effect=new Audio,this.api=new m.default,this.audio.classList.add("audio"),this.audio.classList.add("effect"),this.cardField=new o.default(e),this.element.append(this.buttons.element),this.element.append(this.rating.element),this.element.append(this.cardField.element),this.element.append(this.audio),this.element.append(this.effect)}getArrayToPlay(){return a(this,void 0,void 0,(function*(){const e=yield this.api.getCards();let t=0;for(let n=0;n<e.length;n++)e[n].categoryId===c.state.currentCategory&&t++;const n=[];for(let e=0;e<t;e++)n.push(e);return n}))}getRandomArray(){return a(this,void 0,void 0,(function*(){const e=yield this.getArrayToPlay();let t,n;for(let a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),n=e[t],e[t]=e[a],e[a]=n;return e}))}repeatSound(){return a(this,void 0,void 0,(function*(){const e=c.state.cards[c.state.index].audio;this.playAudio(e)}))}playEffect(e){let t="",n="";c.state.endGame?(t=l.Effects.success,n=l.Effects.failure):(t=l.Effects.correct,n=l.Effects.error),this.effect.src=e?t:n;const a=this.effect.play();void 0!==a&&a.then((()=>{this.checkErrors(e)})).catch()}playAudio(e){this.audio.src=`${e}`;const t=this.audio.play();void 0!==t&&t.then((()=>{this.clickAnswer()})).catch((()=>{}))}trainAudio(e){this.audio.src=`${e}`,this.audio.play()}train(e){const t=e.target;let n;n=t.alt?t.alt:t.children[0].alt;let a=0;for(let e=0;e<c.state.cards.length;e++)c.state.cards[e].word===n&&(a=e);const i=c.state.cards[a].audio;this.trainAudio(i)}flippToBack(e){const t=e.target.dataset.name;this.flipp(t,!0)}flippToFront(e){const t=document.querySelector(`#${e}`);t.addEventListener("mouseleave",(()=>{t.classList.remove("flipped")}))}flipp(e,t){document.querySelectorAll(`.${e}`).forEach((e=>{t?e.classList.add("flipped"):e.classList.remove("flipped")})),this.flippToFront(e)}playGame(){c.state.index=c.state.randomArray[c.state.randomArray.length-1];const e=c.state.cards[c.state.index].audio;this.playAudio(e)}clickAnswer(){document.querySelector(".card__field").addEventListener("click",(e=>{this.compareCards(e)}))}compareCards(e){const t=e.target,n=t.alt;c.state.gameActive&&(t.classList.contains("hide")||(c.state.cards[c.state.index].word===n?(c.state.randomArray.pop(),this.playEffect(!0),this.hideImage(!0)):this.playEffect(!1)))}checkErrors(e){e||c.state.errors++,this.addStar(e)}addStar(e){this.rating.addRatingStar(e)}hideImage(e){const t=document.querySelectorAll(".card__img-front"),n=t[c.state.index%t.length];e?(n.classList.add("hide"),this.checkFinish()):t.forEach((e=>{e.classList.remove("hide")}))}checkFinish(){c.state.randomArray.length?setTimeout((()=>{this.playGame()}),1e3):this.gameFinish()}gameFinish(){c.state.endGame=!0,c.state.errors?this.playEffect(!1):this.playEffect(!0),this.showFinalPicture()}showFinalPicture(){c.state.gameActive=!1;const e=new h.default;e.destroyPage(),e.createPage(u.pages.endGame.id),c.state.errors?e.page.addFinalPage(!1):e.page.addFinalPage(!0),setTimeout((()=>{const e=new CustomEvent("finish",{bubbles:!0,composed:!0});document.dispatchEvent(e)}),4e3)}}t.default=p},584:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(417);const i=a(n(583)),s=n(14);class d extends i.default{constructor(){super("div",["btns"]),this.start=new i.default("button",["start","none"]),this.repeat=new i.default("button",["repeat","none"]),this.start.element.innerText="start",this.element.append(this.start.element),this.element.append(this.repeat.element),this.switchStart()}checkBtn(){let e;return e=document.querySelector(".start")||this.start.element,e}toggle(){const e=document.querySelector(".start"),t=document.querySelector(".repeat");e.classList.toggle("none"),t.classList.toggle("none")}switchStart(){const e=this.checkBtn();e&&s.state.playState&&e.classList.remove("none"),e&&!s.state.playState&&e.classList.add("none");const t=document.querySelector(".repeat");t&&t.classList.add("none")}}t.default=d},790:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(463);const i=a(n(583)),s=n(14);class d extends i.default{constructor(){super("div",["loading"]),this.loader=new i.default("div",["loader"]),this.element.innerText="",s.state.isAppLoaded||(this.element.innerText="Loading..."),this.element.append(this.loader.element)}}t.default=d},168:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(306);const s=i(n(583)),d=i(n(203));class o extends s.default{constructor(e){super("div",["main__card"]),this.image="",this.title="",this.api=new d.default,this.addComponents(e)}addComponents(e){return a(this,void 0,void 0,(function*(){const t=yield this.api.getCategories();let n="";for(let a=0;a<t.length;a++)t[a].id===e&&(n=t[a].name);const a=yield this.checkUrl(e);this.image=`\n      <img\n        src='${a}'\n        class='main__card-img'\n        alt='${n}'\n        data-category='${n}'/>\n    `,this.title=`\n      <h5 class='main__card-title' data-category='${n}'>${n}</h5>\n    `,this.element.dataset.category=n,this.element.insertAdjacentHTML("afterbegin",this.image),this.element.insertAdjacentHTML("beforeend",this.title)}))}checkUrl(e){return a(this,void 0,void 0,(function*(){const t=yield this.api.getCards();let n="";for(let a=0;a<t.length;a++)if(e===t[a].categoryId)return n=t[a].image,n;return n}))}}t.default=o},743:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(170);const i=a(n(583)),s=a(n(878)),d=a(n(27));class o extends i.default{constructor(){super("main",["main"]),this.page=new d.default(""),this.auth=new s.default,this.message=new i.default("div",["auth__message"])}createPage(e){this.page=new d.default(e),document.querySelector(".main").append(this.page.element)}destroyPage(){var e;const t=document.querySelector(".page");null===(e=null==t?void 0:t.parentNode)||void 0===e||e.removeChild(t)}addAuthPage(){const e=new s.default;this.element.append(e.element)}destroyAuthPage(){var e;const t=document.querySelector(".auth__container");null===(e=null==t?void 0:t.parentNode)||void 0===e||e.removeChild(t)}showMessage(e,t){t?this.message.element.classList.add("error"):this.message.element.classList.remove("error"),this.message.element.innerHTML=e,this.element.append(this.message.element),setTimeout((()=>{var e;null===(e=this.message.element.parentNode)||void 0===e||e.removeChild(this.message.element)}),4e3)}}t.default=o},27:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(653);const s=i(n(583)),d=i(n(168)),o=i(n(748)),r=n(14),l=i(n(203)),c=i(n(920)),u=i(n(847)),h=i(n(584)),m=n(130),p=n(761),g=n(697),f="none";class v extends s.default{constructor(e){super("div",["page"]),this.api=new l.default,this.container=new o.default(0),this.controls=new h.default,this.element.id=e}addMainPage(){return a(this,void 0,void 0,(function*(){const e=yield this.api.getCategories();for(let t=0;t<e.length;t++){const n=new d.default(e[t].id);this.element.append(n.element)}}))}addCategoryPage(e){const t=new o.default(e);this.element.append(t.element),this.listenCategoryPage()}listenCategoryPage(){this.element.addEventListener("click",(e=>a(this,void 0,void 0,(function*(){const t=e.target;t.classList.contains("start")&&(this.controls.toggle(),this.startGame()),t.classList.contains("repeat")&&this.container.repeatSound(),(t.classList.contains("front")||t.classList.contains("card__img-front")||t.classList.contains("card__title-front"))&&(r.state.playState||(r.state.cards=yield this.getCardsToPlay(),this.container.train(e))),t.classList.contains("card__btn-svg")&&(r.state.playState||this.container.flippToBack(e))}))))}startGame(){return a(this,void 0,void 0,(function*(){r.state.gameActive=!0,r.state.endGame=!1,r.state.errors=0,r.state.cards=yield this.getCardsToPlay();const e=yield this.container.getRandomArray();r.state.randomArray=e,this.container.playGame()}))}getCardsToPlay(){return a(this,void 0,void 0,(function*(){const e=[],t=yield this.api.getCards();for(let n=0;n<t.length;n++)r.state.currentCategory===t[n].categoryId&&e.push(t[n]);return e}))}addFinalPage(e){let t="",n="";e?(t="success",n="You win!"):(t="failure",n=`You failed with ${r.state.errors} errors!`);const a=`\n      <div class='message'>${n}</div>\n      <div class='${t}'></div>\n    `;this.element.insertAdjacentHTML("afterbegin",a)}addAdminCategoryPage(){return a(this,void 0,void 0,(function*(){const e=yield this.api.getCategories();for(let t=0;t<e.length;t++){const n=new c.default(e[t].id,e[t].name);this.element.append(n.element)}const t=new s.default("div",["create__container"]);t.element.insertAdjacentHTML("afterbegin",'\n      <h1>Create new Category</h1>\n      <div class="create__btn"></div>\n    '),this.element.append(t.element),this.listenAdminCategoryPage()}))}addAdminCardsPage(e){return a(this,void 0,void 0,(function*(){const t=yield this.api.getCategories(),n=yield this.api.getCards();let a="";for(let n=0;n<t.length;n++)t[n].id===e&&(a=t[n].name);const i=new s.default("div",["admin__container"]);for(let t=0;t<n.length;t++)if(n[t].categoryId===e){const e=new u.default(n[t]);i.element.append(e.element)}const d=`\n      <div class="admin__cards_title">\n        <h1>Category: <span class="admin__title" id="title-${e}">${a}</span></h1>\n\n        <button class="admin__back">back to categories</button>\n      </div>\n      `;this.element.insertAdjacentHTML("afterbegin",d);const o=new s.default("div",["newcard__create"]);o.element.insertAdjacentHTML("afterbegin",'\n      <h1>Add new Word</h1>\n      <div class="card__add"></div>\n    '),i.element.append(o.element),this.element.append(i.element),this.listenAdminCardsPage()}))}listenAdminCategoryPage(){this.element.addEventListener("click",(e=>{const t=e.target;(t.classList.contains("cat__update")||t.classList.contains("cat__remove"))&&this.checkActionToChangeCategory(e),t.classList.contains("create__btn")&&this.openCategoryCreator(),t.classList.contains("cat__cancel")&&this.cancelCategoryUpdator(e),t.classList.contains("cat__create")&&this.submitCategoryUpdator(e)}))}listenAdminCardsPage(){this.element.addEventListener("click",(e=>{const t=e.target;(t.classList.contains("card__remove")||t.classList.contains("card__update")||t.classList.contains("card__add"))&&this.checkActionToChangeCard(e),t.classList.contains("card__cancel")&&this.closeCardUpdator(e),t.classList.contains("card__create")&&this.submitCardUpdator(e)}))}checkActionToChangeCategory(e){var t;const n=e.target,a=+n.id.split("-")[1],i=n.id.split("-")[0],s=null===(t=document.getElementById(`title-${a}`))||void 0===t?void 0:t.innerText;i===m.Actions.remove?this.removeCategory(a):this.openCategoryUpdator(a,s)}removeCategory(e){return a(this,void 0,void 0,(function*(){const t=document.getElementById("adminCategory"),n=document.getElementById(`cat-${e}`);null==t||t.removeChild(n),this.api.removeCategory(e);const a=yield this.api.getCards(),i=[];for(let t=0;t<a.length;t++)a[t].categoryId===e&&i.push(a[t]);i.forEach((e=>{this.api.removeCard(e.id)}))}))}openCategoryUpdator(e,t){new c.default(e,"").openCategoryUpdator(e,t)}openCategoryCreator(){const e=document.querySelector(".create__container"),t=new c.default(0,"");null==e||e.before(t.element)}cancelCategoryUpdator(e){const t=+e.target.id.split("-")[1];t?new c.default(t,"").cancelCategoryUpdator(t):this.closeCategoryCreator()}closeCategoryCreator(){const e=document.getElementById("adminCategory"),t=document.getElementById("cat-0");null==e||e.removeChild(t)}submitCategoryUpdator(e){var t;return a(this,void 0,void 0,(function*(){const n=+e.target.id.split("-")[1],a=null===(t=document.getElementById(`title-${n}`))||void 0===t?void 0:t.innerText,i=document.getElementById(`update-input-${n}`).value,s={id:n,name:i};i?i!==a?n?(this.updateCategory(n),yield this.api.updateCategory(s)):this.createNewCategory():this.showMessage(n,p.Message.nothingUpdate):this.showMessage(n,p.Message.addName)}))}updateCategory(e){const t=document.getElementById(`title-${e}`),n=document.getElementById(`update-input-${e}`);t.innerText=n.value,new c.default(e,"").cancelCategoryUpdator(e)}createNewCategory(){return a(this,void 0,void 0,(function*(){const e=document.getElementById("update-input-0");if(e.value)if(yield this.isUniqueCategory(e.value)){this.closeCategoryCreator();const t={name:e.value},n=yield this.api.createCategory(t);this.showNewCatogory(n)}else this.showMessage(0,p.Message.categoryExists)}))}isUniqueCategory(e){return a(this,void 0,void 0,(function*(){let t=!0;const n=yield this.api.getCategories();for(let a=0;a<n.length;a++){if(n[a].name===e)return t=!1,t;t=!0}return t}))}showNewCatogory(e){const t=document.querySelector(".create__container"),n=new c.default(e.id,e.name);null==t||t.before(n.element)}showMessage(e,t){const n=document.getElementById(`card-${e}`),a=document.getElementById(`cat-${e}`),i=new s.default("div",["card__message"]);i.element.innerText=t,n&&(n.append(i.element),setTimeout((()=>{n.removeChild(i.element)}),3e3)),a&&(a.append(i.element),setTimeout((()=>{a.removeChild(i.element)}),3e3))}checkActionToChangeCard(e){const t=e.target,n=+t.id.split("-")[2],a=t.id.split("-")[1];a===m.Actions.remove?this.removeCard(n):a===m.Actions.update?(this.openCardUpdator(n,!0),this.addCurrentCardToState(n,!0),this.listenLoadingChanging(n)):this.openCardCreator()}openCardCreator(){const e=r.state.currentCategory,t=document.querySelector(".newcard__create"),n=document.getElementById("card-0"),a={id:0,categoryId:e,word:"",translation:"",image:"",audio:""},i=new u.default(a);n||(null==t||t.before(i.element),this.listenLoadingChanging(0))}listenLoadingChanging(e){const t=document.getElementById(`image-input-${e}`),n=document.getElementById(`sound-input-${e}`);t.addEventListener("change",(e=>{e.preventDefault(),this.showPreviewImage(e)})),n.addEventListener("change",(e=>{e.preventDefault(),this.showPreviewSound(e)}))}showPreviewImage(e){const t=e.target,n=t.id.split("-")[2],a=document.getElementById(`preview-${n}`),i=document.getElementById(`image-done-${n}`),s=new FileReader;s.onloadend=()=>{const e=s.result,t=new Image;t.src=e,t.id=`loaded-img-${n}`,t.className="loaded__img",a.innerHTML="",a.append(t),i.classList.remove(f)},(null==t?void 0:t.files)&&t.files[0]&&s.readAsDataURL(t.files[0])}showPreviewSound(e){const t=e.target,n=+t.id.split("-")[2],a=document.getElementById(`sound-done-${n}`),i=new FileReader;i.onloadend=()=>{a.classList.remove(f)},(null==t?void 0:t.files)&&t.files[0]&&i.readAsDataURL(t.files[0])}removeCard(e){const t=document.querySelector(".admin__container"),n=document.getElementById(`card-${e}`);null==t||t.removeChild(n),e&&this.api.removeCard(e)}openCardUpdator(e,t){const n=document.getElementById(`word-front-${e}`),a=document.getElementById(`word-back-${e}`),i=document.getElementById(`preview-${e}`),s=document.getElementById(`image-done-${e}`),d=document.getElementById(`sound-done-${e}`);t?(n.classList.add(f),a.classList.remove(f),s.classList.add(f),d.classList.add(f),i.innerHTML=""):(n.classList.remove(f),a.classList.add(f))}addCurrentCardToState(e,t){return a(this,void 0,void 0,(function*(){const n=yield this.api.getCardById(e);if(t)r.state.cards.push({id:e,categoryId:n.categoryId,word:n.word,translation:n.translation,image:"",audio:n.audio});else for(let t=0;t<r.state.cards.length;t++)r.state.cards[t].id===e&&r.state.cards.splice(t,1)}))}closeCardUpdator(e){const t=+e.target.id.split("-")[2];t?(this.openCardUpdator(t,!1),this.addCurrentCardToState(t,!1)):this.removeCard(t)}submitCardUpdator(e){return a(this,void 0,void 0,(function*(){const t=+e.target.id.split("-")[2];e.preventDefault(),t?this.needToUpdate(t)?this.updateCard(e):this.showMessage(t,p.Message.nothingUpdate):this.checkNewWord()}))}isUniqueWord(e){return a(this,void 0,void 0,(function*(){let t=!0;const n=yield this.api.getCards();for(let a=0;a<n.length;a++){if(n[a].word===e)return t=!1,t;t=!0}return t}))}checkNewWord(){return a(this,void 0,void 0,(function*(){const e=document.getElementById("word-input-0"),t=document.getElementById("translation-input-0"),n=e.value,a=t.value;n&&a?(yield this.isUniqueWord(n))?this.showNewCard():this.showMessage(0,p.Message.wordExists):this.showMessage(0,p.Message.wordAmpty)}))}needToUpdate(e){let t=!1;const n=document.getElementById(`word-input-${e}`),a=document.getElementById(`translation-input-${e}`),i=document.getElementById(`loaded-img-${e}`),s=document.getElementById(`sound-done-${e}`);let d=!1,o=!1,l=!1;for(let t=0;t<r.state.cards.length;t++)e===r.state.cards[t].id&&(n.value!==r.state.cards[t].word&&(d=!0),a.value!==r.state.cards[t].translation&&(o=!0),s.classList.contains(f)||(l=!0));return(d||o||i||l)&&(t=!0),t}getImageSrc(e){return a(this,void 0,void 0,(function*(){return(yield this.api.getCardById(e)).image}))}submitCardForm(e){return a(this,void 0,void 0,(function*(){null==e||e.preventDefault();const t=null==e?void 0:e.target;let n,a=0;if(e&&(a=+t.id.split("-")[2]),!document.getElementById(`sound-done-${a}`).classList.contains(f))return n=yield this.api.loadDataToServer(a),n}))}updateCard(e){return a(this,void 0,void 0,(function*(){const t=+e.target.id.split("-")[2],n=document.getElementById(`word-input-${t}`),a=document.getElementById(`translation-input-${t}`),i=document.getElementById(`loaded-img-${t}`),s=document.getElementById(`sound-${t}`),d=document.getElementById(`word-${t}`),o=document.getElementById(`translation-${t}`);d.innerText=n.value,o.innerText=a.value;let l="";i&&i.src?(document.getElementById(`card-image-${t}`).src=i.src,l=i.src):l=yield this.getImageSrc(t);const c=yield this.submitCardForm(e);let u="";c&&(u=c.name);let h="";if(u)h=`${g.Endpoints.audioServerUrl}/${u}`;else for(let e=0;e<r.state.cards.length;e++)t===r.state.cards[e].id&&(h=r.state.cards[e].audio,u=h.split("/").pop());s.innerText=u;const m={id:t,categoryId:r.state.currentCategory,word:n.value,translation:a.value,image:l,audio:h};yield this.api.updateCard(m),this.openCardUpdator(t,!1)}))}createNewCard(){return a(this,void 0,void 0,(function*(){const e=document.getElementById("word-input-0"),t=document.getElementById("translation-input-0"),n=document.getElementById("loaded-img-0");let a="./img/preview.png",i="./audio/error.mp3";n&&n.src&&(a=n.src);const s=yield this.submitCardForm(null);s&&(i=`${g.Endpoints.audioServerUrl}/${s.name}`);const d={id:0,categoryId:r.state.currentCategory,word:e.value,translation:t.value,image:a,audio:i};return yield this.api.createCard(d)}))}showNewCard(){return a(this,void 0,void 0,(function*(){const e=document.querySelector(".newcard__create"),t=yield this.createNewCard(),n=new u.default(t);this.removeCard(0),null==e||e.before(n.element)}))}}t.default=v},723:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(24);const i=a(n(583));class s extends i.default{constructor(){super("div",["rating"]),this.success='<div class="star star-correct"></div>',this.error='<div class="star star-error"></div>'}addRatingStar(e){const t=document.querySelector(".rating");t&&e&&t.insertAdjacentHTML("beforeend",this.success),t&&!e&&t.insertAdjacentHTML("beforeend",this.error)}removeStars(){document.querySelectorAll(".star").forEach((e=>{var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}))}}t.default=s},607:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function d(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,o)}r((a=a.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(752));n(307),window.onload=()=>a(void 0,void 0,void 0,(function*(){const e=document.querySelector("body");if(!e)throw Error("App element not found");new s.default(e)}))}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();